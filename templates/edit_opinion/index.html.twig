{# templates/edit_opinion/index.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Editar opinión sobre {{ object.getName() }}{% endblock %}

{% block main %}

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var ratingOptions = document.getElementsByClassName('hidden-rating');

            for (var i = 0; i < ratingOptions.length; i++) {
                ratingOptions[i].addEventListener('change', function() {

                    var selected = document.querySelector('.rating-label.bg-slate-300');
                    
                    if (selected) {
                        selected.classList.remove('bg-slate-300');
                        selected.classList.remove('dark:bg-slate-900');
                    }

                    if (this.checked) {
                        this.parentElement.classList.add('bg-slate-300');
                        this.parentElement.classList.add('dark:bg-slate-900');
                    }
                });

                // Verifica si alguna opción está seleccionada al cargar la página
                if (ratingOptions[i].checked) {
                    ratingOptions[i].parentElement.classList.add('bg-slate-300');
                    ratingOptions[i].parentElement.classList.add('dark:bg-slate-900');
                }
            }
        });
    </script>

    <div class="flex justify-center items-center text-black dark:text-white
    text-4xl flex-col">

        <h1 class="sm:m-5 m-1 sm:text-5xl text-3xl text-center">Editar opinión sobre {{ object.getName() }}</h1>

        {# {{ form(form) }} #}
        {{ form_start(form) }}
        <div class="text-black dark:text-white">

            <div class="mb-7 mt-3 mx-1 text-center">
                {# {{ form_label(form.comment) }} #}
                <h2 class="my-5">Comentario: </h2>
                <h3 class="my-2 text-xl">Aviso: si se edita el comentario volverá a ser enviado a revisión.</h3>
                <h3 class="text-2xl text-blue-800 dark:text-blue-200 my-2">
                    <button type="button">
                        <span class="" data-a11y-dialog-show="my-dialog">
                            Leer normas
                        </span>
                    </button>
                </h3>
                
                <div class="text-black dark:text-white text-xl sm:text-3xl">
                    {# {{ form_widget(form.comment) }} #}
                    {{ form_widget(form.comment, {'attr': {'class': '
                    border-0 dark:bg-slate-800 w-full p-2 border border-gray-300 rounded-xl 
                    lg:h-80 h-56 mx-1 lg:w-[60rem] bg-slate-200'}}) }}

                </div>
            </div>
            
            <div class="flex items-center justify-center flex-col ">
                <h2 class="my-5 ">Valoración general: </h2>

                <div class="flex flex-row space-x-2 bg-slate-200 dark:bg-slate-800 sm:p-5 p-2 rounded-xl text-xl sm:text-3xl flex items-center ">

                    {% for choice_form in form.givenScore %}
                        <label for="{{ choice_form.vars.id }}" class="rating-label cursor-pointer px-1 py-2 sm:p-4 rounded-md">
                            {% if choice_form.vars.value == '' %}
                                Ninguna
                            {% else %}
                                <img class="w-12" src="/img/rating-{{ choice_form.vars.value }}.png" alt="Rating {{ choice_form.vars.value }}">
                            {% endif %}
                            {{ form_widget(choice_form, {'attr': {'class': 'hidden-rating'}}) }}
                        </label>
                    {% endfor %}

                </div>

            </div>

            </div>
                <div class="text-center ">
                    {# <h2>Enviar!</h2> #}
                    {# {{ form_widget(form.Enviar, {'attr': {'class': 'btn btn-success'}}) }} #}
                    {{ form_widget(form.Enviar, {'attr': {'class': 'sm:text-5xl text-3xl
                    py-5 sm:px-36 px-16 bg-slate-200 dark:bg-slate-800 text-center rounded-full m-11'}}) }}
                </div>
            </div>

        {{ form_end(form) }}


         <div
            class="dialog-container"
            id="my-dialog"
            aria-hidden="true"
            aria-labelledby="my-dialog-title"
            aria-describedby="my-dialog-description"
            >
            <div class="dialog-overlay" data-a11y-dialog-hide></div>
            <div class="dialog-content" role="document">
                <button
                data-a11y-dialog-hide
                class="dialog-close"
                aria-label="Close this dialog window"
                type="button"
                >
                <svg class="svg-icon" viewBox="0 0 20 20">
                    <path
                    fill="currentcolor"
                    d="M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z"
                    ></path>
                </svg>
                </button>

                <h1 id="my-dialog-title">Normas para la publicación de comentarios en UniOpinions</h1>
                
                <div id="my-dialog-description">
                    <p><span class="text-blue-600 uppercase">Respeto:</span> Todos los comentarios deben ser respetuosos. No se tolerará ninguna forma de insulto, lenguaje ofensivo, acoso o discriminación.</p>

                    <p><span class="text-blue-600 uppercase">Objetividad:</span> Los comentarios deben ser objetivos y basados en experiencias personales. Evita generalizaciones y suposiciones.</p>

                    <p><span class="text-blue-600 uppercase">Veracidad:</span> Asegúrate de que tu comentario refleje tus verdaderas experiencias y opiniones. No se permiten falsedades o exageraciones.</p>

                    <p><span class="text-blue-600 uppercase">Relevancia:</span> Mantén tus comentarios relevantes para la enseñanza y el rendimiento del profesor. No incluyas información personal irrelevante sobre el profesor.</p>

                    <p><span class="text-blue-600 uppercase">Privacidad:</span> No se permite compartir información personal del profesor que no sea de dominio público.</p>

                    <p><span class="text-blue-600 uppercase">Lenguaje apropiado:</span> Usa un lenguaje adecuado y evita el uso de jerga o abreviaturas que podrían ser confusas.</p>

                    <p><span class="text-blue-600 uppercase">Sin promociones:</span> Los comentarios no deben contener promociones de productos o servicios, ni enlaces a sitios web externos.</p>

                    <p><span class="text-blue-600 uppercase">Sin plagio:</span> Todos los comentarios deben ser originales. No copies comentarios de otros lugares.</p>

                    <p><span class="text-blue-600 uppercase">No se permiten comentarios duplicados:</span> Cada estudiante debe realizar un único comentario por profesor.</p>

                    <p><span class="text-blue-600 uppercase">Denuncia de abusos:</span> Si ves un comentario que viola estas normas, repórtalo. Nos tomamos muy en serio las violaciones y tomaremos las medidas necesarias para mantener la integridad de nuestra plataforma.</p>

                </div>

                <h1 id="my-dialog-footer">
                    Recuerda que estas reglas están en lugar para garantizar un ambiente respetuoso y útil para todos los usuarios. Incumplir estas normas puede llevar a la eliminación del comentario o la suspensión de tu cuenta.
                </h1>

            </div>
        </div>

    </div>

{% endblock %}
